language: cpp
compiler:
  #- clang
  - gcc

os:
  - linux

before_install:
  - if [ $TRAVIS_OS_NAME = linux ]; then
        cat /etc/*release;
        uname -a;
        cat /proc/cpuinfo;

        sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa;
        sudo apt-get update -qq;
    fi

install:
  - if [ $TRAVIS_OS_NAME = linux ]; then
        sudo apt-get install qtbase5-dev qtdeclarative5-dev libqt5webkit5-dev libsqlite3-dev;
        sudo apt-get install qt5-default qttools5-dev-tools;
        sudo apt-get install fakeroot;

        if [ "$CXX" = "g++" ]; then
            sudo apt-get install -qq g++-4.8;
        fi;

        if [ "$CXX" == "clang++" ]; then
            sudo apt-get install -qq clang-3.4;
        fi;
    fi


script:
  - $CXX --version;
    if [ $TRAVIS_OS_NAME = linux ]; then
        cd qdevicemonitor;

        if [ "$CXX" = "g++" ]; then
            qmake -spec linux-g++;
        fi;
        if [ "$CXX" = "clang++" ]; then
            qmake -spec linux-clang;
        fi;

        make -j2;

        cd ..;
        ./build_deb.sh;
        ls -l;
    fi
